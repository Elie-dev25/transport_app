@startuml Communication_Fuel_Alert
skinparam defaultFontName Arial
skinparam shadowing false
skinparam dpi 150
left to right direction

actor "Administrateur" as ADM
rectangle "Scheduler" as Sched
rectangle "FuelAlertService" as FuelS
database "DB" as DB
rectangle "NotificationService" as Notif

Sched -[#black]-> FuelS : 1: cron: verifier_seuils()
FuelS -[#black]-> DB : 1.1: get_bus_levels()
DB -[#black]-> FuelS : 1.2: niveaux, seuils précédents
FuelS -[#black]-> FuelS : 1.3: detecter_transitions(10%,25%,50%)
FuelS -[#black]-> DB : 1.4: upsert(FuelAlertState)
FuelS -[#black]-> Notif : 2: notifier(alertes)
Notif -[#black]-> ADM : 3: email/sms

@enduml
