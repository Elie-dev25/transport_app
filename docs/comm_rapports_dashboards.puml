@startuml Communication_Rapports_Dashboards
skinparam defaultFontName Arial
skinparam shadowing false
skinparam dpi 150
left to right direction

actor "Administrateur" as ADM
actor "Responsable" as RESP
actor "Superviseur" as SUP
rectangle "Web UI" as UI
rectangle "ReportingController" as RepC
rectangle "ReportingService" as RepS
database "DB" as DB
rectangle "ExportService" as ExpS
rectangle "BI/ETL (externe)" as BI #lightgray

ADM -[#black]-> UI : 1: consulter tableaux de bord
UI -[#black]-> RepC : 2: GET /dashboard
RepC -[#black]-> RepS : 3: fetch_indicateurs()
RepS -[#black]-> DB : 3.1: queries agrégées
DB -[#black]-> RepS : 3.2: métriques
RepS -[#black]-> RepC : 3.3: KPIs
RepC -[#black]-> UI : 4: affiche KPIs

RESP -[#black]-> UI : 5: générer rapport
UI -[#black]-> RepC : 6: POST /rapport
RepC -[#black]-> RepS : 7: generer_rapport(params)
RepS -[#black]-> DB : 7.1: queries
DB -[#black]-> RepS : 7.2: dataset
RepS -[#black]-> ExpS : 8: export(PDF/CSV)
ExpS -[#black]-> UI : 9: fichier téléchargeable
' Optionnel intégration BI
RepS -[#gray]-> BI : 7.3: push dataset <<extend>>

@enduml
