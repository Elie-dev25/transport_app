<!-- Modal Trajet Interne Bus UdM - Version Partagée -->
<!-- Utilisable par tous les rôles (admin, responsable, chargé transport) -->
{% from 'shared/macros/form_macros.html' import error_container %}

<div id="trajetInterneBusUdMModal" class="modal">
  <div class="modal-content">
    <button type="button" id="closeTrajetInterneBusUdMModal" class="close-btn"><i class="fas fa-times"></i></button>
    <div class="modal-header">
      <h3><i class="fas fa-bus"></i> Trajet interne de bus UdM</h3>
    </div>
    <div class="modal-body">
      {{ error_container('trajetInterneBusUdMError') }}
      <form method="POST" id="trajetInterneBusUdMForm" class="modal-form" action="{{ trajet_interne_url or url_for('admin.trajet_interne_bus_udm') }}">
        {{ form_trajet_interne.hidden_tag() }}
        <div class="form-grid">
          <div class="form-group">
            {{ form_trajet_interne.numero_bus_udm.label }}
            {{ form_trajet_interne.numero_bus_udm() }}
          </div>
          
          <!-- Nouveaux champs lieu de départ et arrivée -->
          <div class="form-group">
            {{ form_trajet_interne.lieu_depart.label }}
            {{ form_trajet_interne.lieu_depart() }}
          </div>
          <div class="form-group">
            {{ form_trajet_interne.point_arriver.label }}
            {{ form_trajet_interne.point_arriver() }}
          </div>
          
          <div class="form-group">
            {{ form_trajet_interne.date_heure_depart.label }}
            {{ form_trajet_interne.date_heure_depart(type='datetime-local') }}
          </div>
          
          <div class="form-group">
            {{ form_trajet_interne.type_passagers.label }}
            {{ form_trajet_interne.type_passagers() }}
          </div>
          <div class="form-group">
            {{ form_trajet_interne.nombre_places_occupees.label }}
            {{ form_trajet_interne.nombre_places_occupees() }}
          </div>
          <div class="form-group">
            {{ form_trajet_interne.chauffeur_id.label }}
            {{ form_trajet_interne.chauffeur_id() }}
          </div>
         
          <div class="form-group">
            {{ form_trajet_interne.kilometrage_actuel.label }}
            {{ form_trajet_interne.kilometrage_actuel() }}
          </div>
        </div>
        <div class="form-actions">
          <button type="submit" class="submit-btn">
            <i class="fas fa-save"></i> Enregistrer le trajet
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Initialisation du gestionnaire unifié -->
{% from 'shared/macros/form_macros.html' import init_modal_form %}
{{ init_modal_form('trajetInterneBusUdMForm', 'trajetInterneBusUdMModal', 'trajetInterneBusUdMError', 'Trajet interne enregistré avec succès.') }}
