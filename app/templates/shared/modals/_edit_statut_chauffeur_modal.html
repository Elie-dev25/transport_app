<!-- Modal for Edit Chauffeur Statut Form -->
{% from 'shared/macros/form_macros.html' import error_container %}

<div id="editStatutChauffeurModal" class="modal">
  <div class="modal-content">
    <button type="button" id="closeEditStatutModal" class="close-btn"><i class="fas fa-times"></i></button>
    <div class="modal-header">
      <h3><i class="fas fa-calendar-alt"></i> Modifier le statut du chauffeur</h3>
    </div>
    <div class="modal-body">
      {{ error_container('statutChauffeurError') }}

      <form id="editStatutChauffeurForm" action="/admin/modifier_statut_chauffeur_ajax" method="POST">
        <input type="hidden" id="chauffeurId" name="chauffeur_id">

        <div class="form-grid">
          <div class="form-group full-width">
            <label>Statut :</label>
            <select name="statut" required>
              <option value="">-- Sélectionner un statut --</option>
              <option value="CONGE">Congé</option>
              <option value="PERMANENCE">Permanence</option>
              <option value="SERVICE_WEEKEND">Service Week-end</option>
              <option value="SERVICE_SEMAINE">Service Semaine</option>
            </select>
          </div>
          <div class="form-group">
            <label>Date de début :</label>
            <input type="datetime-local" name="date_debut" required>
          </div>
          <div class="form-group">
            <label>Date de fin :</label>
            <input type="datetime-local" name="date_fin" required>
          </div>
        </div>
        
        <!-- Raccourcis de dates -->
        <div class="date-shortcuts">
          <h5>Raccourcis :</h5>
          <div class="shortcuts-grid">
            <button type="button" class="shortcut-btn btn-secondary" data-shortcut="today">Aujourd'hui</button>
            <button type="button" class="shortcut-btn btn-secondary" data-shortcut="tomorrow">Demain</button>
            <button type="button" class="shortcut-btn btn-secondary" data-shortcut="this-weekend">Ce week-end</button>
            <button type="button" class="shortcut-btn btn-secondary" data-shortcut="next-week">Semaine prochaine</button>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="submit-btn">
            <i class="fas fa-save"></i> Enregistrer le statut
          </button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Initialisation du gestionnaire unifié -->
{% from 'shared/macros/form_macros.html' import init_modal_form %}
{{ init_modal_form('editStatutChauffeurForm', 'editStatutChauffeurModal', 'statutChauffeurError', 'Statut du chauffeur modifié avec succès.') }}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Gestionnaire pour le bouton de fermeture
    const closeBtn = document.getElementById('closeEditStatutModal');
    if (closeBtn) {
        closeBtn.addEventListener('click', function() {
            FormModalManager.closeModal('editStatutChauffeurModal');
        });
    }
});
</script>
