<!-- Modal Départ de Banekane Retour -->
<div id="departBanekaneRetourModal" class="modal">
  <div class="modal-content">
    <button type="button" id="closeDepartBanekaneRetourModal" class="close-btn"><i class="fas fa-times"></i></button>
    <div class="modal-header">
      <h3><i class="fas fa-route"></i> Départ de Banekane (Retour)</h3>
    </div>
    <div class="modal-body">
      <div class="alert alert-danger" style="display:none;" id="departBanekaneRetourError"></div>
      <form method="POST" id="departBanekaneRetourForm" class="modal-form" action="{{ depart_banekane_retour_url or url_for('charge_transport.depart_banekane_retour') }}">
        {{ form_banekane_retour.hidden_tag() }}
        <div class="form-grid">
          <div class="form-group">
            <label>Point de départ</label>
            <input type="text" value="Banekane" disabled class="form-control" />
            {{ form_banekane_retour.point_depart() }}
          </div>
          <div class="form-group">
            <label>{{ form_banekane_retour.type_bus.label }}</label>
            <div class="type-bus-toggle">
              {% for subfield in form_banekane_retour.type_bus %}
                <label class="type-bus-btn">
                  {{ subfield() }}
                  <span>{{ subfield.label.text }}</span>
                </label>
              {% endfor %}
            </div>
          </div>
          <!-- Champs spécifiques AED -->
          <div class="form-group aed-only">
            {{ form_banekane_retour.chauffeur_id.label }}
            {{ form_banekane_retour.chauffeur_id(class_='form-control') }}
          </div>
          <div class="form-group aed-only">
            {{ form_banekane_retour.numero_bus_udm.label }}
            {{ form_banekane_retour.numero_bus_udm(class_='form-control') }}
          </div>
          <div class="form-group aed-only">
            {{ form_banekane_retour.type_passagers.label }}
            {{ form_banekane_retour.type_passagers(class_='form-control') }}
          </div>
          <div class="form-group aed-only">
            {{ form_banekane_retour.kilometrage_actuel.label }}
            {{ form_banekane_retour.kilometrage_actuel(class_='form-control') }}
          </div>
          <!-- Champs spécifiques Prestataire -->
          <div class="form-group prestataire-only">
            {{ form_banekane_retour.nom_agence.label }}
            {{ form_banekane_retour.nom_agence(class_='form-control') }}
          </div>
          <div class="form-group prestataire-only">
            {{ form_banekane_retour.immat_bus.label }}
            {{ form_banekane_retour.immat_bus(class_='form-control') }}
          </div>
          <div class="form-group prestataire-only">
            {{ form_banekane_retour.nom_chauffeur_agence.label }}
            {{ form_banekane_retour.nom_chauffeur_agence(class_='form-control') }}
          </div>
          <!-- Champs communs -->
          <div class="form-group">
            {{ form_banekane_retour.nombre_places_occupees.label }}
            {{ form_banekane_retour.nombre_places_occupees(class_='form-control') }}
          </div>
          <div class="form-group full-width">
            {{ form_banekane_retour.date_heure_depart.label }}
            {{ form_banekane_retour.date_heure_depart(type='datetime-local', class_='form-control') }}
          </div>
        </div>
        <button type="submit" class="submit-btn modal-submit">{{ form_banekane_retour.submit.label }}</button>
      </form>
      <div id="departBanekaneRetourFeedback"></div>
    </div>
  </div>
</div>
<!-- End Modal Départ de Banekane Retour -->
