<!-- Charge Transport dashboard -->
<!-- Cette page est dédiée au chargé de transport pour gérer les trajets, les affectations, etc. -->
{% extends "_base_charge.html" %}
{% block title %}Tableau de Bord Chargé de Transport{% endblock %}

{% set active_page = 'accueil' %}
{% set page_title = 'Tableau de Bord Chargé de Transport' %}

{% block dashboard_content %}
        <!-- Statistics Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-header">
                    <div>
                        <div class="stat-value">{{ stats.bus_actifs }}</div>
                        <div class="stat-label">Bus AED Actifs</div>
                    </div>
                    <div class="stat-icon blue">
                        <i class="fas fa-bus"></i>
                    </div>
                </div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>{{ stats.bus_actifs_change }}</span>
                </div>
            </div>

            <div class="stat-card success">
                <div class="stat-header">
                    <div>
                        <div class="stat-value">{{ stats.trajets_jour_aed }}</div>
                        <div class="stat-label">Trajets du Jour AED</div>
                    </div>
                    <div class="stat-icon green">
                        <i class="fas fa-route"></i>
                    </div>
                </div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>{{ stats.trajets_jour_change }}</span>
                </div>
            </div>

            <div class="stat-card info">
                <div class="stat-header">
                    <div>
                        <div class="stat-value">{{ stats.trajets_jour_bus_agence }}</div>
                        <div class="stat-label">Trajets du Jour Prestataire</div>
                    </div>
                    <div class="stat-icon purple">
                        <i class="fas fa-bus-alt"></i>
                    </div>
                </div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <!-- Placeholder, à personnaliser si besoin -->
                    <span></span>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-header">
                    <div>
                        <div class="stat-value">{{ stats.etudiants }}</div>
                        <div class="stat-label">Étudiants Transportés</div>
                    </div>
                    <div class="stat-icon blue">
                        <i class="fas fa-users"></i>
                    </div>
                </div>
                <div class="stat-change positive">
                    <i class="fas fa-arrow-up"></i>
                    <span>{{ stats.etudiants_change }}</span>
                </div>
            </div>

            <div class="stat-card warning">
                <div class="stat-header">
                    <div>
                        <div class="stat-value">{{ stats.bus_maintenance }}</div>
                        <div class="stat-label">Bus en Maintenance</div>
                    </div>
                    <div class="stat-icon orange">
                        <i class="fas fa-tools"></i>
                    </div>
                </div>
                <div class="stat-change negative">
                    <i class="fas fa-arrow-down"></i>
                    <span>{{ stats.bus_maintenance_info }}</span>
                </div>
            </div>
        </div>

        

        <!-- Quick Actions -->
        <div class="quick-actions">
            <h2 class="section-title">
                <i class="fas fa-bolt"></i>
                Enregistrer une navette
            </h2>
            <div class="actions-grid ">
                <a href="#" id="openDepartAedModal" class="action-btn b1">
    <i class="fas fa-route"></i>
    <span>Départ AED pour Banekane</span>
</a>
                <a href="#" id="openDepartPrestataireModal" class="action-btn">
                    <i class="fas fa-route"></i>
                    <span>Départ Prestataire</span>
                </a>
                <a href="#" id="openDepartBanekaneRetourModal" class="action-btn">
                    <i class="fas fa-route"></i>
                    <span>Départ de Banekane ↩ </span>
                </a>
                <a href="{{ url_for('charge_transport.generer_rapport') }}" class="action-btn">
                    <i class="fas fa-file-alt"></i>
                    <span>Générer Rapport</span>
                </a>
            </div>
        </div>

       <!-- Trafic Étudiants - Temps Réel -->
       <div class="trafic-section">
        <h2 class="section-title"><i class="fas fa-chart-line"></i> Trafic Étudiants - Temps Réel</h2>
        <div class="trafic-grid">
            <div class="trafic-card arrived">
                <div class="trafic-number">{{ trafic.arrives }}</div>
                <div class="trafic-label">Arrivés au Campus</div>
            </div>
            <div class="trafic-card present">
                <div class="trafic-number">{{ trafic.present }}</div>
                <div class="trafic-label">Présents au Campus</div>
            </div>
            <div class="trafic-card departed">
                <div class="trafic-number">{{ trafic.partis }}</div>
                <div class="trafic-label">Partis du Campus</div>
            </div>
        </div>
    </div>

    <!-- Modals -->

    {% include 'partials/charge_transport/_depart_prestataire_modal.html' %}

    {% include 'partials/charge_transport/_depart_banekane_retour_modal.html' %}

    {% include 'partials/charge_transport/_depart_aed_modal.html' %}

    <script src="{{ url_for('static', filename='js/dashboard_charge.js') }}"></script>
    <script src="{{ url_for('static', filename='js/depart_aed_modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/depart_bus_agence_modal.js') }}"></script>
    <script src="{{ url_for('static', filename='js/depart_banekane_retour_modal.js') }}"></script>
    {% endblock %}