{% extends "_base_dashboard.html" %}

{% set sidebar_title = "Chauffeur UdM Panel" %}
{% set sidebar_subtitle = "TransportUdM" %}

{% block extra_head %}
    <!-- CSS spécifique au chauffeur -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/chauffeur-status.css') }}">
{% endblock %}

{% block topbar %}
<div class="top-bar">
    <h1 class="page-title">{{ page_title | default('Tableau de Bord Chauffeur') }}</h1>
    <div class="top-bar-actions">
        <!-- Statut du chauffeur -->
        <div class="chauffeur-status">
            {% if statut_actuel == 'CONGE' %}
                <div class="status-container conge">
                    <div class="status-icon">
                        <i class="fas fa-calendar-times"></i>
                    </div>
                    <div class="status-text">
                        <span class="status-label">Statut</span>
                        <span class="status-value">En Congé</span>
                    </div>
                </div>
            {% elif statut_actuel == 'PERMANENCE' %}
                <div class="status-container permanence">
                    <div class="status-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="status-text">
                        <span class="status-label">Statut</span>
                        <span class="status-value">Permanence</span>
                    </div>
                </div>
            {% elif statut_actuel == 'SERVICE_WEEKEND' %}
                <div class="status-container weekend">
                    <div class="status-icon">
                        <i class="fas fa-calendar-week"></i>
                    </div>
                    <div class="status-text">
                        <span class="status-label">Statut</span>
                        <span class="status-value">Service Week-end</span>
                    </div>
                </div>
            {% elif statut_actuel == 'SERVICE_SEMAINE' %}
                <div class="status-container semaine">
                    <div class="status-icon">
                        <i class="fas fa-calendar-day"></i>
                    </div>
                    <div class="status-text">
                        <span class="status-label">Statut</span>
                        <span class="status-value">Service Semaine</span>
                    </div>
                </div>
            {% else %}
                <div class="status-container non-specifie">
                    <div class="status-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <div class="status-text">
                        <span class="status-label">Statut</span>
                        <span class="status-value">Non spécifié</span>
                    </div>
                </div>
            {% endif %}
        </div>

        <div class="user-menu">
            <div class="user-avatar">{{ current_user.initials | default('U') }}</div>
            <div>
                <div style="font-weight:600;font-size:14px;">
                    {{ ((current_user.nom ~ ' ' ~ current_user.prenom)|trim) or current_user.login | default('Utilisateur') }}
                </div>
                <div style="font-size:12px;color:#64748b;">
                    {{ current_user.login | default('user') }}
                    {% if current_user.role == 'CHAUFFEUR' %}
                        <span class="badge bg-warning ms-1" style="font-size:10px;">CHAUFFEUR</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>


{% endblock %}

<!-- Mini Sidebar pour tablettes -->
<div class="mini-sidebar">
    <a href="{{ url_for('chauffeur.dashboard') }}" class="mini-nav-item" data-tooltip="Dashboard">
        <i class="fas fa-tachometer-alt"></i>
    </a>
    <a href="{{ url_for('chauffeur.trajets') }}" class="mini-nav-item" data-tooltip="Mes Trajets">
        <i class="fas fa-route"></i>
    </a>
    <a href="{{ url_for('chauffeur.profil') }}" class="mini-nav-item" data-tooltip="Mon Profil">
        <i class="fas fa-user"></i>
    </a>
    <a href="{{ url_for('chauffeur.bus_udm') }}" class="mini-nav-item" data-tooltip="Bus UdM">
        <i class="fas fa-bus"></i>
    </a>
    <a href="{{ url_for('chauffeur.carburation') }}" class="mini-nav-item" data-tooltip="Carburation">
        <i class="fas fa-gas-pump"></i>
    </a>
</div>

<!-- Bottom Navigation pour mobile -->
<div class="bottom-nav">
    <div class="bottom-nav-container">
        <a href="{{ url_for('chauffeur.dashboard') }}" class="bottom-nav-item">
            <i class="fas fa-tachometer-alt"></i>
            <span>Home</span>
        </a>
        <a href="{{ url_for('chauffeur.trajets') }}" class="bottom-nav-item">
            <i class="fas fa-route"></i>
            <span>Trajets</span>
        </a>
        <a href="{{ url_for('chauffeur.profil') }}" class="bottom-nav-item">
            <i class="fas fa-user"></i>
            <span>Profil</span>
        </a>
        <a href="{{ url_for('chauffeur.bus_udm') }}" class="bottom-nav-item">
            <i class="fas fa-bus"></i>
            <span>Bus</span>
        </a>
        <a href="{{ url_for('chauffeur.carburation') }}" class="bottom-nav-item">
            <i class="fas fa-gas-pump"></i>
            <span>Carburant</span>
        </a>
    </div>
</div>

{% block nav_menu %}
<div class="nav-item">
    <a href="{{ url_for('chauffeur.dashboard') }}" class="nav-link{% if active_page == 'dashboard' %} active{% endif %}">
        <i class="fas fa-tachometer-alt"></i>
        <span>Tableau de Bord</span>
    </a>
</div>
<div class="nav-item">
    <a class="nav-link {{ 'active' if active_page == 'profil' else '' }}" href="{{ url_for('chauffeur.profil') }}">
        <i class="fas fa-user"></i>
        <span>Mon Profil</span>
    </a>
</div>
<div class="nav-item">
    <a class="nav-link {{ 'active' if active_page == 'trajets' else '' }}" href="{{ url_for('chauffeur.trajets') }}">
        <i class="fas fa-route"></i>
        <span>Mes Trajets</span>
    </a>
</div>
<div class="nav-item">
    <a href="{{ url_for('chauffeur.bus_udm') }}" class="nav-link{% if active_page == 'bus_udm' %} active{% endif %}">
        <i class="fas fa-bus"></i>
        <span>Bus UdM</span>
    </a>
</div>
<div class="nav-item">
    <a href="{{ url_for('chauffeur.carburation') }}" class="nav-link{% if active_page == 'carburation' %} active{% endif %}">
        <i class="fas fa-gas-pump"></i>
        <span>Carburation</span>
    </a>
</div>
<div class="nav-item">
    <a href="{{ url_for('chauffeur.bus_udm') }}?open=panne" class="nav-link">
        <i class="fas fa-triangle-exclamation"></i>
        <span>Déclarer panne</span>
    </a>
</div>
{% endblock %}
